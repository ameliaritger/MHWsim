---
title: "RPi data visualization"
author: "Amelia Ritger"
date: "2023-08-31"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(lubridate)
library(janitor)
```

```{r}
profile <- read_csv(here("data", "mhw_profile_final.csv")) %>%
  filter(date_time < ymd_hms("2015-08-31 12:00:00")) %>%
  filter(date_time > ymd_hms("2015-08-30 18:00:00")) %>%
  select(1, 4) %>%
  mutate(timestamp = date_time %m+% years(8),
         temperature=chill)
```

```{r}
data <- read_csv(here("data", "2023-09-05 12:13:28.218724.csv")) %>%
  select(1:4, 8:22) %>%
  clean_names() %>%
  mutate(timestamp = ymd_hms(timestamp)) %>%
  select(-(17:19)) %>% #remove sump tank temps
  pivot_longer(cols=5:16, names_to = "tank", values_to = "temperature")

ggplot(data, aes(x=timestamp)) +
  geom_line(aes(y=temperature, color=tank), size=1) +
  geom_line(aes(y=chill_set), color="black")
  
#ggsave(here("figures", "proof.png"))
```

```{r}
data <- read_csv(here("data", "2023-08-31 15:17:07.635884.csv")) %>%
  select(1:22) %>%
  clean_names() %>%
  mutate(timestamp = ymd_hms(timestamp)) %>%
  rename(T1 = 10,
         T2 =11,
         T3 =12,
         T4 = 13,
         T5 =14) %>%
  select(1,2,10:14) %>%
  pivot_longer(cols=3:6, names_to = "tank", values_to = "temperature")


ggplot(data) +
  geom_line(aes(x=timestamp, y=temperature, color=tank), size=1) +
  geom_line(aes(x=timestamp, y=chill_set), color="black")

ggsave(here("figures", "bad.png"))
```


